{"version":3,"sources":["submittedAppController.coffee"],"names":[],"mappings":"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","file":"submittedApp.js","sourcesContent":["###*\n# SubmittedAppController\n# __SHORT_DESCRIPTION__\n#\n# @class        SubmittedAppController\n# @package      APPMarket.Backend.BackendApp\n# @author       Anthony Pillos <me@anthonypillos.com>\n# @copyright    Copyright (c) 2016 Anthony Pillos. (http://anthonypillos.com,http://iapdesign.com,http://developers.ph)\n# @version      v1\n###\n\nAPPMarket.Backend.BackendApp.controller \"SubmittedAppController\",\n['$scope'\n'$rootScope'\n'$timeout'\n'blockUI'\n'ApiFactory'\n'ListingService'\n'SystemFactory'\n'SweetAlertService'\n'UploaderFactory'\n(\n    $scope\n    $rootScope\n    $timeout\n    blockUI\n    $apiFactory\n    $listingService\n    $systemFactory\n    $sweetAlertService\n    $uploaderFactory\n) ->\n\n    class SubmittedAppController\n\n        ###*\n        #\n        # @return\n        ###\n        constructor : () ->\n            \n            $scope.resources    = APPMarket.Resources\n            $scope.vars         = APPMarket.Vars\n            $scope.link         =\n                root               : $scope.resources.root\n                lists              : $scope.resources.index\n\n            $scope.blockUI       = $scope.blockui('blockui-effect')\n            $scope.blockSearchUI = $scope.blockui('search-result')\n            $scope.details       = {}\n            $scope.per_page      = 50\n            $scope.letters       = $scope.vars.alpha\n            $scope.categoryObj   = \n                list: []\n            \n            if $scope.vars.hash_id is 0 and $scope.vars.is_create is 0\n                \n                $scope.details = \n                    per_page : 50\n                    search   : ''\n                    letter   : ''\n\n                $scope.pagePresetKey = 'appmarket-page'\n                $scope = angular.extend $scope, $listingService, {\n                    getCollections: (pageNum) -> $scope.getOrderLists(pageNum)\n                }\n                $scope.loadCollections()\n\n            else\n\n                # $scope.uploads    = {}\n                # $scope.categories = $scope.vars.categories\n                # $scope.apkFile = $scope.apkFiles = \n                #     app_version : ''\n                #     signature   : ''\n                #     sha_1       : ''\n                #     description : ''\n                #     app_link    : ''\n                #     file        : {}\n\n                # $scope.details  =\n                #     image_app      : {}\n                #     screenshots    : []\n                #     is_enabled     : true\n                #     app_id         : ''\n                #     title          : ''\n                #     description    : ''\n                #     image_url      : ''\n                #     link           : ''\n                #     developer_link : ''\n                #     developer_name : ''\n                #     apk_files      : []\n                #     versions       : []\n\n                # # if is create = 0, it means we just need to load the details\n                # if $scope.vars.is_create is 0\n                #     $scope.getDetail()\n\n \n        $scope.loadCollections = () ->\n            $timeout () ->\n\n                pageNum = _h.get($scope.pagePresetKey ) || 1\n                if $scope.details.search != ''\n                    pageNum = 1\n\n                $scope.getCollections pageNum\n\n        $scope.getOrderLists = (pageNum) ->\n            pageNum = pageNum || 1\n            $scope.blockUI.start('Please Wait . . .')\n            \n            _h.set $scope.pagePresetKey, pageNum\n\n\n            $scope.details.per_page = if angular.isUndefined $scope.details.per_page then $scope.per_page  else $scope.details.per_page\n            $scope.details.search = if angular.isUndefined $scope.details.search then '' else $scope.details.search\n\n\n            search              = '&search='+$scope.details.search\n            perpage             = '&per_page='+$scope.details.per_page\n            letter              = '&letter='+$scope.details.letter\n            submittedAppType    = '&is_submitted=yes'\n\n            routes = $scope.link.lists+'?page='+pageNum+search+letter+perpage+submittedAppType\n\n            $scope.requestData routes, 'GET'\n                .success (response) ->\n\n                    if response.data?\n                        angular.bind $scope, $scope.dataHandler response\n                    else\n                        _h.set $scope.pagePresetKey, 1\n                        $scope.data       = []\n                        $scope.range      = []\n                        $scope.totalPages = 0\n\n                    $timeout () ->\n                      $scope.blockUI.stop()\n                    ,500\n\n        $scope.delRequest   = (data,type) ->\n\n            $scope.blockUI.start('Please Wait . . .')\n            $apiFactory.sendRequest {}, $scope.link.lists+'/'+data.id, 'DELETE'\n            .then (response) ->\n                if response.data.status is 'error'\n                    $scope.alertMsg {msg: response.data.message}\n                else\n                    $scope.alertMsg {msg: response.data.message,success:true}\n                    # $scope.loadCollections()\n                    window.location.reload()\n\n                $scope.blockUI.stop()\n\n        $scope.delModal = (data,type) ->\n            \n            opts = \n                title               :'Please Confirm'\n                text                : _h.sprintf 'Do you want to delete this page (<strong>%s</strong>)?',data.title\n                html                : true\n                showCancelButton    : true\n                cancelButtonText    : 'Cancel'\n            $sweetAlertService.swal opts, (isConfirm) ->\n                if(isConfirm)\n                    $scope.delRequest data,type\n\n\n        $scope.alertMsg = (opts) ->\n            options =\n                title : 'System Response'\n                msg   : 'Problem in your request!'\n            opt = angular.merge options,opts\n\n            if opt.success is true\n                return $sweetAlertService.success opt.title,opt.msg\n\n            return $sweetAlertService.error opt.title,opt.msg\n\n\n        $scope.removeItem = (file,index) ->\n\n            if angular.isDefined index\n                if index is 'apk-update'\n                    $scope.apkFile.file = {}\n\n            else\n                if file.id\n                    $scope.deleteFile $scope.link.app_remove_upload+'/'+file.id\n\n                if file.upload_type is 'app-image'\n                    $scope.details.app_image = ''\n\n                index = $scope.details.screenshots.indexOf(file)\n                $scope.details.screenshots.splice index,1\n\n        $scope.deleteFile = (url) ->\n\n            $apiFactory.sendRequest {}, url, \"POST\"\n                .then (response) ->\n                    window.location.reload()\n\n                ,(response) ->\n                    # temporary alert\n                    alert response.data.message\n                    $scope.myBlockUI.stop()\n\n\n        $scope.search = () ->\n            $scope.loadCollections()\n\n        $scope.clearAll = () ->\n            $scope.details = \n                search   : ''\n                letter   : ''\n                per_page : 50\n\n            $scope.loadCollections()\n\n        $scope._slug = (str) ->\n            str.toString()\n                .toLowerCase()\n                .replace(/[^\\w\\s-]/g, '') #remove non-word [a-z0-9_], non-whitespace, non-hyphen characters\n                .replace(/[\\s_-]+/g, '-') #swap any length of whitespace, underscore, hyphen characters with a single -\n                .replace(/^-+|-+$/g, ''); # remove leading, trailing -\n\n        $scope.perPageChange = (page) ->\n            $scope.details.per_page = page\n            $scope.loadCollections()\n\n        $scope.statusChange = () ->\n            $scope.isEdit = false\n\n        $scope.letterFilter = (letter) ->\n            $scope.details.letter = letter\n\n            $scope.loadCollections()\n\n        $scope.blockui = (instanceName) ->\n                return blockUI.instances.get(instanceName)\n\n    new SubmittedAppController()\n\n]"]}