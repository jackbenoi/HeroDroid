{"version":3,"sources":["appsController.coffee"],"names":[],"mappings":"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","file":"apps.js","sourcesContent":["###*\n# AppsController\n# __SHORT_DESCRIPTION__\n#\n# @class        AppsController\n# @package      APPMarket.Frontend.FrontendApp\n# @author       Anthony Pillos <me@anthonypillos.com>\n# @copyright    Copyright (c) 2016 Anthony Pillos. (http://anthonypillos.com,http://iapdesign.com,http://developers.ph)\n# @version      v1\n###\n\nAPPMarket.Frontend.FrontendApp.controller \"AppsController\",\n['$scope'\n'$rootScope'\n'$timeout'\n'$filter'\n'blockUI'\n'ApiFactory'\n'ListingService'\n'SystemFactory'\n'SweetAlertService'\n'UploaderFactory'\n(\n    $scope\n    $rootScope\n    $timeout\n    $filter\n    blockUI\n    $apiFactory\n    $listingService\n    $systemFactory\n    $sweetAlertService\n    $uploaderFactory\n) ->\n\n    class AppsController\n\n        ###*\n        #\n        # @return\n        ###\n        constructor : () ->\n            \n            $scope.resources    = APPMarket.Resources\n            $scope.vars         = APPMarket.Vars\n            $scope.link         =\n                root               : $scope.resources.root\n                submitapps_list    : $scope.resources.submitapps_list\n                lists              : $scope.resources.index\n                app_update         : $scope.resources.app_update\n                app_version_update : $scope.resources.app_version_update\n                app_search         : $scope.resources.app_search\n                app_import         : $scope.resources.app_import\n                app_android_detail : $scope.resources.app_android_detail\n                app_remove_upload  : $scope.resources.app_remove_upload\n                app_remove_apk     : $scope.resources.app_remove_apk\n\n            $scope.blockUI       = $scope.blockui('blockui-effect')\n            $scope.details       = {}\n            \n            $scope.uploads    = {}\n            $scope.categories = $scope.vars.categories\n            $scope.apkFile = $scope.apkFiles = \n                app_version : ''\n                signature   : ''\n                sha_1       : ''\n                description : ''\n                app_link    : ''\n                file        : {}\n\n            $scope.details  =\n                image_app      : {}\n                screenshots    : []\n                is_enabled     : true\n                app_id         : ''\n                title          : ''\n                description    : ''\n                image_url      : ''\n                link           : ''\n                developer_link : ''\n                developer_name : ''\n                apk_files      : []\n                versions       : []\n\n\n            # if is create = 0, it means we just need to load the details\n            if $scope.vars.is_create is 0\n                $scope.getDetail()\n\n\n        # # DETAIL START #\n        $scope.getDetail = () ->\n            $scope.blockUI.start('Please Wait . . .')\n\n            # assign user_id\n            $scope.details.user_id = APPMarket.user_id\n\n            $apiFactory.sendRequest {}, $scope.link.lists+'/'+$scope.vars.hash_id,'GET'\n            .then (response) ->\n                if response.data.status is 'error'\n                    $scope.alertMsg {msg: response.data.message}\n                    $scope.blockUI.stop()\n                else\n                    dataObj                    = response.data.data\n\n                    screenshots = []\n                    angular.forEach dataObj.screenshots, (value, key)->\n                        screenshots[key] =\n                            id       : value.id\n                            name     : value.original_name\n                            link     : value.image_link\n                            position : value.position\n\n\n                    dataObj.screenshots = screenshots\n                    $scope.details      = dataObj\n\n                    $scope.details.is_enabled =  if $scope.details.is_enabled is 1 then true else false\n                    $scope.details.is_featured = if $scope.details.is_featured is 1 then true else false\n\n\n\n                    $scope.blockUI.stop()\n            .catch (response) ->\n                if response.data.status is 'error'\n                    $scope.alertMsg {msg: 'No query results found, You will be redirected back in 2 seconds...'}\n                    $timeout () ->\n                        window.location.href = $scope.link.root\n                    ,2000\n\n        $scope.grabAndroidDetail = () ->\n\n\n\n            try\n                $systemFactory.validateObj $scope.details,['app_id']\n\n                $scope.blockUI.start('Please Wait . . .')\n\n                # assign user_id\n                $scope.details.user_id = APPMarket.user_id\n\n                $apiFactory.sendRequest {app_id: $scope.details.app_id}, $scope.link.app_android_detail,'POST'\n                .then (response) ->\n                    if response.data.status is 'error'\n                        $scope.alertMsg {msg: response.data.message}\n                        $scope.blockUI.stop()\n                    else\n                        dataObj     = response.data.data\n                        screenshots = []\n                        angular.forEach dataObj.screenshots, (value, key)->\n                            screenshots[key] = \n                                name     : 'Screenshot From Google #'+ ++key\n                                link     : value\n                                position : key\n\n                        details =\n                            is_enabled     : true\n                            app_id         : dataObj.app_id\n                            title          : dataObj.title\n                            description    : dataObj.description\n                            image_url      : dataObj.cover_image\n                            link           : dataObj.app_link\n                            developer_link : dataObj.developer.link\n                            developer_name : dataObj.developer.name\n                            screenshots    : screenshots\n                            image_app      : {}\n\n\n                        if dataObj.title\n                            details.seo_title = dataObj.title\n\n                        if dataObj.description\n                            details.seo_descriptions = $filter('truncateStr')(dataObj.description,155)\n\n                        angular.extend $scope.details,details\n\n                        $scope.blockUI.stop()\n                .catch (response) ->\n                    msgInfo = 'No results found'\n                    if response.data.status is 'error'\n                        msgInfo = response.data?.message\n\n                    $scope.alertMsg {msg: msgInfo}\n                    $scope.blockUI.stop()\n\n            catch e\n                $scope.alertMsg {msg: e}\n\n\n        uploadSingle = $rootScope.$on 'file:uploading', (evt,fileObj,identifier,isMultiple) ->\n\n            # validation\n            $timeout () ->\n\n                if identifier is 'app-image'\n                    $scope.details.image_app = fileObj\n\n                else if identifier is 'app-version'\n                    if angular.isUndefined $scope.apkFiles\n                        $scope.apkFiles = {}\n\n                    $scope.apkFiles.file = fileObj\n\n                else if identifier is 'app-version-update'\n                    if angular.isUndefined $scope.apkFile\n                        $scope.apkFile = {}\n\n                    $scope.apkFile.file = fileObj\n\n        upload = $rootScope.$on 'file:upload-in-array', (evt, data, index)->\n            $timeout () ->\n                files = data.file\n\n                if angular.isUndefined $scope.details.screenshots\n                    $scope.details.screenshots = []\n\n                angular.forEach files, (file,key) ->\n                    identifier      = _h.randomKey 12\n                    file.identifier = identifier\n                    if _.contains [\"image/gif\", \"image/jpeg\", \"image/jpg\", \"image/png\"], file.type\n                        filereader = new FileReader()\n                        filereader.onload = (e) -> $rootScope.$emit 'image:preview', e.target.result, identifier\n                        filereader.readAsDataURL file\n\n                        $scope.details.screenshots.push file\n                    else\n                        $scope.alertMsg {msg: 'Upload Image only'}\n\n    \n        $onImagePreview = $rootScope.$on 'image:preview', (evt, image, identifier) ->\n            uploadimage = _.findWhere $scope.details.screenshots, { identifier : identifier }\n            uploadimage.preview = image\n            $scope.$apply() if not $scope.$$phase\n            return\n\n\n        complete = $rootScope.$on 'upload:complete', (evt, data, index)->\n                \n                resp = JSON.parse $uploaderFactory.dataObj[index].xhr.response\n\n                if resp.status is 'error'\n                    $scope.alertMsg {msg: resp.message}\n\n                    if angular.isDefined($scope.blockUI)    \n                        $scope.blockUI.stop()\n\n                    return false\n\n                if angular.isDefined($scope.versionBlockUI)\n                    $scope.versionBlockUI[index].stop()\n\n                if angular.isDefined($scope.myBlockUI)    \n                    $scope.myBlockUI.stop()\n\n                if angular.isDefined($scope.blockUI)        \n                    $scope.blockUI.stop()\n\n                $scope.alertMsg {msg: 'Successfully submitted apps, Redirecting after two(2) seconds.',success: true}\n                $timeout () ->\n                    window.location.href = $scope.link.submitapps_list\n                , 2000\n\n\n        $scope.$on '$destroy', () ->\n            upload()\n            uploadSingle()\n            complete()\n            abortData()\n            $onImagePreview()\n\n\n\n        $scope.update = () ->\n           \n            $scope.details.hash_id     = $scope.vars.hash_id;\n            $scope.details.is_enabled  = if $scope.details.is_enabled is true then 1 else 0\n            $scope.details.is_featured = if $scope.details.is_featured is true then 1 else 0\n\n            if $scope.apkFiles.file.name or $scope.apkFiles.app_link\n                $scope.details.apk_file_upload = $scope.apkFiles\n\n            $scope.blockUI.start('Please Wait . . .')\n\n            try\n                sendData = $systemFactory.objectToFormData($scope.details)\n                $uploaderFactory.upload $scope.link.app_update,sendData,[]\n\n\n            catch e\n                $scope.alertMsg {msg: e}\n\n\n        $scope.create = () ->\n\n            $scope.details.user_id     = APPMarket.user_id;\n            $scope.details.hash_id     = $scope.vars.hash_id;\n            $scope.details.is_enabled  = if $scope.details.is_enabled is true then 1 else 0\n            $scope.details.is_featured = if $scope.details.is_featured is true then 1 else 0\n\n            if $scope.apkFiles.file.name or $scope.apkFiles.app_link\n                $scope.details.apk_file_upload = $scope.apkFiles\n\n            $scope.blockUI.start('Please Wait . . .')\n\n            try\n\n                $systemFactory.validateObj $scope.details,['app_id','title','description','image_app','categories','user_id']\n\n\n                sendData = $systemFactory.objectToFormData($scope.details)\n                $uploaderFactory.upload $scope.link.lists,sendData,[]\n\n\n                # window.location.reload()\n            catch e\n                $scope.alertMsg {msg: e}\n\n                $scope.blockUI.stop()\n\n\n        # END DETAIL START #\n\n\n        # START appmarket googleplay #\n\n        $scope.createApkItem = () ->\n\n            if !$scope.apkFiles.app_link and !$scope.apkFiles.file\n                $scope.alertMsg {msg: 'Apk Link URL download required or Upload your own apk file.'}\n                return false;\n\n            $scope.update()\n\n        $scope.updateApkItem = (version,index) ->\n            if $scope.apkFile.file.name\n                version.apk_file_upload = $scope.apkFile\n\n\n            if angular.isUndefined $scope.versionBlockUI\n                $scope.versionBlockUI = []\n\n            $scope.versionBlockUI[index] = $scope.blockui('version_'+index)\n\n            $scope.versionBlockUI[index].start 'Updating APK Information. . .'\n            sendData = $systemFactory.objectToFormData(version)\n            $uploaderFactory.upload $scope.link.app_version_update,sendData,$scope.versionBlockUI,index\n          \n\n        $scope.removeApkItem = (version) ->\n\n            opts = \n                title               :'Please Confirm'\n                text                : _h.sprintf 'Do you want to delete this apk version (<strong>%s</strong>)?',version.app_version\n                html                : true\n                showCancelButton    : true\n                cancelButtonText    : 'Cancel'\n            $sweetAlertService.swal opts, (isConfirm) ->\n                if(isConfirm)\n                    if version.id\n                        $scope.deleteFile $scope.link.app_remove_apk+'/'+version.id\n\n\n        # DETAIL END #\n\n        \n        $scope.alertMsg = (opts) ->\n            options =\n                title : 'System Response'\n                msg   : 'Problem in your request!'\n            opt = angular.merge options,opts\n\n            if opt.success is true\n                return $sweetAlertService.success opt.title,opt.msg\n\n            return $sweetAlertService.error opt.title,opt.msg\n\n\n        $scope.removeItem = (file,index) ->\n\n            if angular.isDefined index\n                if index is 'apk-update'\n                    $scope.apkFile.file = {}\n\n            else\n                if file.id\n                    $scope.deleteFile $scope.link.app_remove_upload+'/'+file.id\n\n                if file.upload_type is 'app-image'\n                    $scope.details.app_image = ''\n\n                index = $scope.details.screenshots.indexOf(file)\n                $scope.details.screenshots.splice index,1\n\n        $scope.deleteFile = (url) ->\n\n            $apiFactory.sendRequest {}, url, \"POST\"\n                .then (response) ->\n                    window.location.reload()\n\n                ,(response) ->\n                    # temporary alert\n                    alert response.data.message\n                    $scope.myBlockUI.stop()\n\n\n        $scope.blockui = (instanceName) ->\n                return blockUI.instances.get(instanceName)\n\n    new AppsController()\n\n]"]}